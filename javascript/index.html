<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | Front end Lab</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="manifest" href="/front-end-lab/manifest.json">
    <link rel="apple-touch-icon" href="/front-end-lab/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/front-end-lab/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Web 开发笔记与解决方案">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/front-end-lab/assets/css/0.styles.2fe69d74.css" as="style"><link rel="preload" href="/front-end-lab/assets/js/app.0dc81959.js" as="script"><link rel="preload" href="/front-end-lab/assets/js/2.902ef262.js" as="script"><link rel="preload" href="/front-end-lab/assets/js/16.fbfe6aca.js" as="script"><link rel="preload" href="/front-end-lab/assets/js/4.344f8158.js" as="script"><link rel="prefetch" href="/front-end-lab/assets/js/10.8e2bb6c9.js"><link rel="prefetch" href="/front-end-lab/assets/js/11.1945b041.js"><link rel="prefetch" href="/front-end-lab/assets/js/12.200e47bf.js"><link rel="prefetch" href="/front-end-lab/assets/js/13.33e68b02.js"><link rel="prefetch" href="/front-end-lab/assets/js/14.5301a7ea.js"><link rel="prefetch" href="/front-end-lab/assets/js/15.a13a9269.js"><link rel="prefetch" href="/front-end-lab/assets/js/17.cf73c2c0.js"><link rel="prefetch" href="/front-end-lab/assets/js/18.c1c1943b.js"><link rel="prefetch" href="/front-end-lab/assets/js/19.c6c21f5d.js"><link rel="prefetch" href="/front-end-lab/assets/js/20.38419639.js"><link rel="prefetch" href="/front-end-lab/assets/js/21.45442743.js"><link rel="prefetch" href="/front-end-lab/assets/js/22.d98acb5d.js"><link rel="prefetch" href="/front-end-lab/assets/js/3.b6ecb846.js"><link rel="prefetch" href="/front-end-lab/assets/js/5.b96d279c.js"><link rel="prefetch" href="/front-end-lab/assets/js/6.a1ed3d85.js"><link rel="prefetch" href="/front-end-lab/assets/js/7.20255447.js"><link rel="prefetch" href="/front-end-lab/assets/js/8.9f778e62.js"><link rel="prefetch" href="/front-end-lab/assets/js/9.1c168ea7.js">
    <link rel="stylesheet" href="/front-end-lab/assets/css/0.styles.2fe69d74.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-lab/" class="home-link router-link-active"><!----> <span class="site-name">Front end Lab</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-lab/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/front-end-lab/javascript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/front-end-lab/topic/2020.html" class="nav-link">
  面试笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-lab/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/typescript/" class="nav-link">
  TypeScript
</a></li></ul></li><li class="dropdown-item"><h4>
          Note
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-lab/git/" class="nav-link">
  GIT
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/REGEXP/" class="nav-link">
  REGEXP
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/operations/" class="nav-link">
  运维笔记
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/mobile/" class="nav-link">
  移动端开发解决方案
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/front-end-lab/further/" class="nav-link">
  扩展阅读
</a></li></ul></div></div> <a href="https://github.com/anran758/front-end-lab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-lab/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/front-end-lab/javascript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/front-end-lab/topic/2020.html" class="nav-link">
  面试笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-lab/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/typescript/" class="nav-link">
  TypeScript
</a></li></ul></li><li class="dropdown-item"><h4>
          Note
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front-end-lab/git/" class="nav-link">
  GIT
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/REGEXP/" class="nav-link">
  REGEXP
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/operations/" class="nav-link">
  运维笔记
</a></li><li class="dropdown-subitem"><a href="/front-end-lab/mobile/" class="nav-link">
  移动端开发解决方案
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/front-end-lab/further/" class="nav-link">
  扩展阅读
</a></li></ul></div></div> <a href="https://github.com/anran758/front-end-lab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end-lab/javascript/#todo" class="sidebar-link">TODO</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-lab/javascript/#代码简洁性" class="sidebar-link">代码简洁性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#科学计数法-e" class="sidebar-link">科学计数法 E</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#三元操作符" class="sidebar-link">三元操作符</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#逻辑运算符" class="sidebar-link">逻辑运算符</a></li></ul></li><li><a href="/front-end-lab/javascript/#array" class="sidebar-link">Array</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#删除数组中指定元素" class="sidebar-link">删除数组中指定元素</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#数组去重" class="sidebar-link">数组去重</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#中文排序" class="sidebar-link">中文排序</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#数组扁平化" class="sidebar-link">数组扁平化</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#其他细节" class="sidebar-link">其他细节</a></li></ul></li><li><a href="/front-end-lab/javascript/#common" class="sidebar-link">Common</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#判断原始类型" class="sidebar-link">判断原始类型</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#计算星座" class="sidebar-link">计算星座</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#判断闰年函数" class="sidebar-link">判断闰年函数</a></li></ul></li><li><a href="/front-end-lab/javascript/#number" class="sidebar-link">Number</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#parseint" class="sidebar-link">parseInt</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#金额分隔" class="sidebar-link">金额分隔</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#生成随机数" class="sidebar-link">生成随机数</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#字符串转数字" class="sidebar-link">字符串转数字</a></li></ul></li><li><a href="/front-end-lab/javascript/#string" class="sidebar-link">String</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#计算字符串长度" class="sidebar-link">计算字符串长度</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#截取字符串" class="sidebar-link">截取字符串</a></li></ul></li><li><a href="/front-end-lab/javascript/#store" class="sidebar-link">Store</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-lab/javascript/#存取数据" class="sidebar-link">存取数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#cookie" class="sidebar-link">cookie</a></li></ul></li><li><a href="/front-end-lab/javascript/#date" class="sidebar-link">Date</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-lab/javascript/#dom" class="sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#批量插入节点" class="sidebar-link">批量插入节点</a></li></ul></li><li><a href="/front-end-lab/javascript/#vue" class="sidebar-link">Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#vuex" class="sidebar-link">vuex</a></li></ul></li><li><a href="/front-end-lab/javascript/#react" class="sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#注意事项与技巧" class="sidebar-link">注意事项与技巧</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#展示型组件特点" class="sidebar-link">展示型组件特点</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#hook" class="sidebar-link">Hook</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#redux" class="sidebar-link">redux</a></li><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#react-与-vue-的选择" class="sidebar-link">React 与 Vue 的选择</a></li></ul></li><li><a href="/front-end-lab/javascript/#小程序" class="sidebar-link">小程序</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-lab/javascript/#第三方库" class="sidebar-link">第三方库</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-lab/javascript/#数据可视化" class="sidebar-link">数据可视化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-lab/javascript/#bizcharts" class="sidebar-link">bizcharts</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h1> <p>细节和技巧的交汇，本篇笔记主要用于速查。</p> <ul><li><a href="#javascript">JavaScript</a> <ul><li><a href="#todo">TODO</a></li> <li><a href="#%e4%bb%a3%e7%a0%81%e7%ae%80%e6%b4%81%e6%80%a7">代码简洁性</a> <ul><li><a href="#%e7%a7%91%e5%ad%a6%e8%ae%a1%e6%95%b0%e6%b3%95-e">科学计数法 E</a></li> <li><a href="#%e4%b8%89%e5%85%83%e6%93%8d%e4%bd%9c%e7%ac%a6">三元操作符</a></li> <li><a href="#%e9%80%bb%e8%be%91%e8%bf%90%e7%ae%97%e7%ac%a6">逻辑运算符</a></li></ul></li> <li><a href="#array">Array</a> <ul><li><a href="#%e5%88%a0%e9%99%a4%e6%95%b0%e7%bb%84%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0">删除数组中指定元素</a></li> <li><a href="#%e6%95%b0%e7%bb%84%e5%8e%bb%e9%87%8d">数组去重</a></li> <li><a href="#%e4%b8%ad%e6%96%87%e6%8e%92%e5%ba%8f">中文排序</a></li> <li><a href="#%e6%95%b0%e7%bb%84%e6%89%81%e5%b9%b3%e5%8c%96">数组扁平化</a></li> <li><a href="#%e5%85%b6%e4%bb%96%e7%bb%86%e8%8a%82">其他细节</a></li></ul></li> <li><a href="#common">Common</a> <ul><li><a href="#%e5%88%a4%e6%96%ad%e5%8e%9f%e5%a7%8b%e7%b1%bb%e5%9e%8b">判断原始类型</a></li> <li><a href="#%e8%ae%a1%e7%ae%97%e6%98%9f%e5%ba%a7">计算星座</a></li> <li><a href="#%e5%88%a4%e6%96%ad%e9%97%b0%e5%b9%b4%e5%87%bd%e6%95%b0">判断闰年函数</a></li></ul></li> <li><a href="#number">Number</a> <ul><li><a href="#parseint">parseInt</a></li> <li><a href="#%e9%87%91%e9%a2%9d%e5%88%86%e9%9a%94">金额分隔</a></li> <li><a href="#%e7%94%9f%e6%88%90%e9%9a%8f%e6%9c%ba%e6%95%b0">生成随机数</a></li> <li><a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bd%ac%e6%95%b0%e5%ad%97">字符串转数字</a></li></ul></li> <li><a href="#string">String</a> <ul><li><a href="#%e8%ae%a1%e7%ae%97%e5%ad%97%e7%ac%a6%e4%b8%b2%e9%95%bf%e5%ba%a6">计算字符串长度</a></li> <li><a href="#%e6%88%aa%e5%8f%96%e5%ad%97%e7%ac%a6%e4%b8%b2">截取字符串</a></li></ul></li> <li><a href="#store">Store</a></li> <li><a href="#%e5%ad%98%e5%8f%96%e6%95%b0%e6%8d%ae">存取数据</a> <ul><li><a href="#cookie">cookie</a></li></ul></li> <li><a href="#date">Date</a></li> <li><a href="#dom">DOM</a> <ul><li><a href="#%e6%89%b9%e9%87%8f%e6%8f%92%e5%85%a5%e8%8a%82%e7%82%b9">批量插入节点</a></li></ul></li> <li><a href="#vue">Vue</a> <ul><li><a href="#vuex">vuex</a></li></ul></li> <li><a href="#react">React</a> <ul><li><a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9%e4%b8%8e%e6%8a%80%e5%b7%a7">注意事项与技巧</a></li> <li><a href="#%e5%b1%95%e7%a4%ba%e5%9e%8b%e7%bb%84%e4%bb%b6%e7%89%b9%e7%82%b9">展示型组件特点</a></li> <li><a href="#hook">Hook</a></li> <li><a href="#redux">redux</a></li> <li><a href="#react-%e4%b8%8e-vue-%e7%9a%84%e9%80%89%e6%8b%a9">React 与 Vue 的选择</a></li></ul></li> <li><a href="#%e5%b0%8f%e7%a8%8b%e5%ba%8f">小程序</a></li> <li><a href="#%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93">第三方库</a></li> <li><a href="#%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96">数据可视化</a> <ul><li><a href="#bizcharts">bizcharts</a></li></ul></li></ul></li></ul> <h2 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h2> <p>我记得当初自学学完 <code>js</code> 语法后是比较茫然的，什么都看过了一遍，但又感觉好像还是什么都不懂。</p> <p>实际上这是熟练度不高的一种表现，如果你已经学习完 <code>js</code> 的语法。这时你可以来做一些 Demo 来验证你的学习成果。</p> <p>比如下面完成下面的小应用能提高你对应 API 熟练度。demo 列表后续还会有所补充，未来有空也会把参考 demo 发布至博客中。</p> <ul><li>[ ] 日历: 考验对 <code>Date</code> 对象的使用。</li> <li>[ ] 简单的四则计算器: 考验对处理<strong>浮点数溢出</strong>的能力、<code>Math</code> 的使用等。</li></ul> <h2 id="代码简洁性"><a href="#代码简洁性" class="header-anchor">#</a> 代码简洁性</h2> <p>在实际工作中，可以在保证语义化的前提使用一些简写方法来提升代码的简洁性</p> <h3 id="科学计数法-e"><a href="#科学计数法-e" class="header-anchor">#</a> 科学计数法 E</h3> <p>似乎很多人都不爱用<code>js</code>的科学计数法，但实际上科学计数法用来表示大数字能使代码显得很简洁易读，如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1000000000</span> <span class="token operator">===</span> <span class="token number">1e9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1e9</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4000000000</span>
</code></pre></div><p>两者对比就能看出差异，而且科学计数法也能做同等的运算。</p> <h3 id="三元操作符"><a href="#三元操作符" class="header-anchor">#</a> 三元操作符</h3> <p>用三元操作符代替简单<code>if...else</code>逻辑，除了简洁之外三元操作符还有一个好处就是可以用作条件预加载。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">let</span> hint <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>age <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hint <span class="token operator">=</span> <span class="token string">'欢迎打开新世界('</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  hint <span class="token operator">=</span> <span class="token string">'嘿, 未成年不得入内!'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token keyword">const</span> hint <span class="token operator">=</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token operator">?</span> <span class="token string">'欢迎打开新世界('</span> <span class="token operator">:</span> <span class="token string">'未成年不得入内!'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> 逻辑运算符</h3> <p>利用好 <code>&amp;&amp;</code> 和 <code>||</code> 特性的能力</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 在某些场景下, 使用 &amp;&amp; 操作符代替 if 能使使你的代码变得更加的整洁</span>
<span class="token keyword">let</span> isMoving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>ismoving <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>ismoving <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// if 语句</span>
container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isMoving<span class="token punctuation">)</span> <span class="token function">handleMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &amp;&amp; 操作符. 前者为 true 的话, 就调用函数</span>
container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> isMoving <span class="token operator">&amp;&amp;</span> <span class="token function">handleMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// || 操作符则相反，只要前面的值为true，就不继续往后走了</span>
</code></pre></div><details><summary>不再建议使用的编程技巧</summary> <p>下面是一些简洁但可读性不太高的一些编程技巧，在 <code>eslint</code> 中已经不建议使用。但可以了解一下：</p> <p><strong>按位非(按位取反):</strong></p> <p>对任一数值<code>x</code>进行按位非操作的结果为<code>-(x + 1)</code>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

<span class="token comment">// 当没有找到内容, 方法返回 -1 时, 进行按位非会加一取反, 则为 0</span>
<span class="token comment">// 这个方法是利用隐式转换，在判断中会将 0 隐式转换为false</span>

<span class="token comment">// 相当于下面的代码同等的效果</span>
<span class="token comment">// names.some(name =&gt; linkName.indexOf(name) === -1)</span>
names<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token operator">~</span>linkName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>位操作符:</strong></p> <p>利用按位或 <code>|</code> 向下取整:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">50.1234</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> int <span class="token operator">=</span> num <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span>
</code></pre></div><p>除此之外，还可以使用<code>~~</code>截除小数，但它只适用于<code>32</code>位数字。<br>
虽说前者会更简单，但有可能会遇到操作符优先级的问题。因此使用时一定要了解它的规则，同时确保代码的可读性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 进行两次反转字位，然后出于10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token operator">~</span><span class="token number">50.1234</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">50.1234</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">50.1234</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre></div></details> <hr> <h2 id="array"><a href="#array" class="header-anchor">#</a> Array</h2> <h3 id="删除数组中指定元素"><a href="#删除数组中指定元素" class="header-anchor">#</a> 删除数组中指定元素</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 删除数组元素, index 为数组索性, 只删除一个</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="数组去重"><a href="#数组去重" class="header-anchor">#</a> 数组去重</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/* es6 */</span>
<span class="token comment">// 利用 Set 没有重复值的特性去重, 再将其转为数组.</span>
<span class="token keyword">let</span> newarr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 原理同上, 只不过是通过扩展运算符扩展出来</span>
<span class="token keyword">let</span> newarr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="中文排序"><a href="#中文排序" class="header-anchor">#</a> 中文排序</h3> <p><strong>[IE11+]</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener noreferrer">String.prototype.localeCompare<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，会返回一个数字，配合数组的<code>sort</code>方法进行排序。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'王五'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  a<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token string">'zh-Hans-CN'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> sensitivity<span class="token operator">:</span> <span class="token string">'accent'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="数组扁平化"><a href="#数组扁平化" class="header-anchor">#</a> 数组扁平化</h3> <p>二维数组扁平化</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">?</span> p<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 7, 8, 9, 10, null, undefined, {…}]</span>
</code></pre></div><p><strong>[ES6+]</strong> 多维数组扁平化</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flatten</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">:</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 7, 8, 9, 10, null, undefined, {…}]</span>
</code></pre></div><h3 id="其他细节"><a href="#其他细节" class="header-anchor">#</a> 其他细节</h3> <p><code>map</code>和<code>forEach</code>的区别:</p> <table><thead><tr><th>方法</th> <th>相同之处</th> <th>不同之处</th></tr></thead> <tbody><tr><td><code>map</code></td> <td>同样用于遍历数组</td> <td><code>map</code>对每项调用的函数后会取得函数的返回值，并推入新的数组中去(意味着可以链式调用)。<br>但是这个方法只有数组才能使用。</td></tr> <tr><td><code>forEach</code></td> <td>同样用于遍历数组</td> <td><code>forEach</code>单纯对数组中每一项调用回调函数，不作其他操作。<br>该方法并不是只有数组能用，部分类数组(如 NodeList)也有这个方法。</td></tr></tbody></table> <blockquote><p>你知道吗？</p></blockquote> <ol><li>数组实际上是一个类列表对象，这意味着我们可以在数组上添加属性，虽然一般不常这样做</li></ol> <hr> <h2 id="common"><a href="#common" class="header-anchor">#</a> Common</h2> <p>通用方法</p> <h3 id="判断原始类型"><a href="#判断原始类型" class="header-anchor">#</a> 判断原始类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 目标是否是对象</span>
<span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用同样的方法进行测试, 结果如下:</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Array]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object String]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Number]. 注意, NaN 是属于数字类型</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">345</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Number]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Symbol]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Function]</span>

<span class="token comment">// 根据上述规则，可以对字符串进行操作</span>
<span class="token comment">// 获取基础类型</span>
<span class="token keyword">function</span> <span class="token function">getBaseType</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> typeStr <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> typeStr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="计算星座"><a href="#计算星座" class="header-anchor">#</a> 计算星座</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 根据生日的月份和日期，计算星座。
 * @param {String} m - 月份
 * @param {String} d - 日期
 * @desc 返回星座名
 */</span>
<span class="token keyword">function</span> <span class="token function">getAstro</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'魔羯水瓶双鱼牡羊金牛双子巨蟹狮子处女天秤天蝎射手魔羯'</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>
    m <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token punctuation">(</span>d <span class="token operator">&lt;</span> <span class="token string">'102223444433'</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">2</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="判断闰年函数"><a href="#判断闰年函数" class="header-anchor">#</a> 判断闰年函数</h3> <p>判断闰年其实只要满足下面几个条件即可:</p> <ul><li>普通年<strong>能被 4 整除</strong>且<strong>不能被 100 整除</strong>的为闰年。如 2004 年就是闰年,1900 年不是闰年</li> <li><strong>世纪年</strong>能被<strong>400 整除</strong>的是闰年。如 2000 年是闰年，1900 年不是闰年</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 判断闰年函数
 * @param  {number} year 要判断的年份
 * @return {bool} 返回布尔值
 */</span>
<span class="token keyword">function</span> <span class="token function">leapYear</span><span class="token punctuation">(</span><span class="token parameter">year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>你知道吗？</p></blockquote> <ul><li>很多编译器在压缩代码的时候，喜欢用<code>!0</code>和<code>!1</code>来代替布尔值<code>false</code>和<code>true</code>。因为可以有效减少文件体积, 但会破坏可读性。</li></ul> <hr> <h2 id="number"><a href="#number" class="header-anchor">#</a> Number</h2> <h3 id="parseint"><a href="#parseint" class="header-anchor">#</a> parseInt</h3> <p>在<code>ES5</code>之前，<code>parseInt</code>在没有传第二个参数的时候，会根据传入字符串的第一个字符来判断使用什么方式进行解析，这个历史遗留的问题可能会导致预期之外的效果。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'08'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 有些旧版本的浏览器可能会解析为 0， 因为浏览器会当做八进制进行解析。</span>

<span class="token comment">// 因此我们用这个方法的时候，一定要显示加上第二个参数，而不要让浏览器去猜</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'08'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre></div><p>还有一个常见的问题就是，不能直接将<code>parseInt</code>作为数组<code>map</code>的回调函数，因为两者所传(接受)的形参的用途不一:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, NaN, NaN]</span>
</code></pre></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt" target="_blank" rel="noopener noreferrer">parseInt(string, radix)<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数解析一个字符串参数，并返回一个指定基数的整数;</p> <p>上面的例子就是因为<code>map</code>函数传入的第二个参数为数组的索引(<code>index</code>)。<code>parseInt</code>在处理到<code>2</code>时，传入了索引<code>2</code>作为基数，然而二进制并没有<code>2</code>这个数字，处理后自然会返回<code>NaN</code>。</p> <h3 id="金额分隔"><a href="#金额分隔" class="header-anchor">#</a> 金额分隔</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 千位分隔符
 *
 * @param {Number} num - 金额
 * @returns 返回格式化后的数字
 */</span>
<span class="token keyword">function</span> <span class="token function">numberWithCommas</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 正则解释: 匹配到 \B(非单词边界)后, 后面要匹配到 (\d{3})+(?!\d)</span>
  <span class="token comment">// (\d{3})+ 至少匹配到一次或多次三个数字</span>
  <span class="token comment">// (?!\d) 同时后面不是数字的话, 就匹配.</span>
  <span class="token comment">// 注意, 后面的 (?=) 那一段代码只是判断的规则, 匹配到后只替换掉 \B</span>
  <span class="token comment">// 而 \B 元字符匹配的是非单词边界</span>

  <span class="token keyword">let</span> num <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  num<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> num<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B(?=(\d{3})+(?!\d))/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numberWithCommas</span><span class="token punctuation">(</span><span class="token number">12345678912.123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;12,345,678,912.1234&quot;</span>
</code></pre></div><p>以上方法的缺陷是需要额外处理小数位，在 <code>ES2018</code> 中可以使用 <a href="https://es6.ruanyifeng.com/#docs/regex#%E5%90%8E%E8%A1%8C%E6%96%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">后行断言<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的语法(chrome 62+)，可以完全通过正则来处理，性能也比上一种方式会更高:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numberWithCommas</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B(?&lt;!\.\d*)(?=(\d{3})+(?!\d))/g</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><details><summary>测试用例</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numberWithCommas</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B(?&lt;!\.\d*)(?=(\d{3})+(?!\d))/g</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> expect</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">numberWithCommas</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> pass <span class="token operator">=</span> result <span class="token operator">===</span> expect<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pass <span class="token operator">?</span> <span class="token string">&quot;✓&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ERROR ====&gt;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> =&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> pass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> failures <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>               <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">0.123456</span><span class="token punctuation">,</span>        <span class="token string">&quot;0.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span>             <span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">100.123456</span><span class="token punctuation">,</span>      <span class="token string">&quot;100.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span>            <span class="token string">&quot;1,000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1000.123456</span><span class="token punctuation">,</span>     <span class="token string">&quot;1,000.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span>           <span class="token string">&quot;10,000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">10000.123456</span><span class="token punctuation">,</span>    <span class="token string">&quot;10,000.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span>          <span class="token string">&quot;100,000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">100000.123456</span><span class="token punctuation">,</span>   <span class="token string">&quot;100,000.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span>         <span class="token string">&quot;1,000,000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1000000.123456</span><span class="token punctuation">,</span>  <span class="token string">&quot;1,000,000.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">,</span>        <span class="token string">&quot;10,000,000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
failures <span class="token operator">+=</span> <span class="token operator">!</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">10000000.123456</span><span class="token punctuation">,</span> <span class="token string">&quot;10,000,000.123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>failures<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>failures<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> test(s) failed</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;All tests passed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p>除了正则还可以使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString" target="_blank" rel="noopener noreferrer">Number.prototype.toLocaleString<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat" target="_blank" rel="noopener noreferrer">Intl.NumberFormat<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来格式数字。该方法的缺点是低版本 IE 及移动端的兼容性支持不够好.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">1234567.123456</span><span class="token punctuation">;</span>

<span class="token comment">// toLocaleString</span>
num<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                            <span class="token comment">// &quot;1,234,567.123&quot;</span>

<span class="token comment">// result =&gt; &quot;1,234,567.123&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置格式选项</span>
<span class="token keyword">var</span> <span class="token constant">CNY_OPTIOONS</span> <span class="token operator">=</span> <span class="token punctuation">{</span> style<span class="token operator">:</span> <span class="token string">&quot;currency&quot;</span><span class="token punctuation">,</span> currency<span class="token operator">:</span> <span class="token string">'CNY'</span> <span class="token punctuation">}</span>

<span class="token comment">// result =&gt; &quot;¥1,234,567.12&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">'zh-CN'</span><span class="token punctuation">,</span> <span class="token constant">CNY_OPTIOONS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// result =&gt; &quot;¥1,234,567.123450&quot;</span>
<span class="token comment">// 设置小数位</span>
<span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">'zh-CN'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token constant">CNY_OPTIOONS</span><span class="token punctuation">,</span> minimumFractionDigits<span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>或者使用 <a href="https://github.com/adamwdraper/Numeral-js/blob/master/numeral.js" target="_blank" rel="noopener noreferrer">numeral.js<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行数字格式化。</p> <p>参考资料: <a href="https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript" target="_blank" rel="noopener noreferrer">How to print a number with commas as thousands separators in JavaScript<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="生成随机数"><a href="#生成随机数" class="header-anchor">#</a> 生成随机数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 生成随机数
 * @param {number} min - 随机数的下限
 * @param {number} max - 随机数的上限
 * @returns 返回指定范围内的随机数
 */</span>
<span class="token keyword">function</span> <span class="token function">randomNum</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="字符串转数字"><a href="#字符串转数字" class="header-anchor">#</a> 字符串转数字</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">'1.1'</span><span class="token punctuation">,</span> <span class="token string">'4566'</span><span class="token punctuation">,</span> <span class="token string">'3e300'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1.1, 4566, 3e+300]</span>
<span class="token punctuation">[</span><span class="token string">'1.1'</span><span class="token punctuation">,</span> <span class="token string">'456a'</span><span class="token punctuation">,</span> <span class="token string">'3e300'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1.1, NaN, 3e+300]</span>
</code></pre></div><hr> <h2 id="string"><a href="#string" class="header-anchor">#</a> String</h2> <h3 id="计算字符串长度"><a href="#计算字符串长度" class="header-anchor">#</a> 计算字符串长度</h3> <p><code>Unicode</code>编码<code>0 ~ 128</code>是单字节编码序列。因此可以利用这个特点来确定字符串的长度(单双字节实际占位)。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">strLen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">255</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> len <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> len<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> len<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//判断某个字符是否是汉字</span>
<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isCHS</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">255</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="截取字符串"><a href="#截取字符串" class="header-anchor">#</a> 截取字符串</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 将字符串拆成字符，并存到数组中</span>
<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">strToChars</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> chars <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chars<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isCHS</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>charsArray <span class="token operator">=</span> chars<span class="token punctuation">;</span>
  <span class="token keyword">return</span> chars<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 截取字符串（从start字节到end字节）</span>
<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">subCHString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">strToChars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>charsArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> len <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> len<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token keyword">return</span> str<span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> str <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>charsArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 截取字符串（从start字节截取length个字节）</span>
<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">subCHStr</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">subCHString</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> start <span class="token operator">+</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h2 id="store"><a href="#store" class="header-anchor">#</a> Store</h2> <h2 id="存取数据"><a href="#存取数据" class="header-anchor">#</a> 存取数据</h2> <p>使用<code>localStorage</code>的时候需要对数据进行一些处理：</p> <ul><li>存入数据时对目标值转为合法的 JSON 值，<code>localStorage.setItem('name', JSON.stringify(name))</code></li> <li>读取数据后对 JSON 值进行解析取得目标值，<code>JSON.parse(localStorage.getItem('name'))</code></li></ul> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> cookie</h3> <blockquote><p>浏览器<code>Cookie</code>是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上</p></blockquote> <p><code>cookie</code>用途：</p> <ul><li>会话管理(用户状态信息等)</li> <li>个性化设置(根据<code>cookie</code>信息为用户提供更进一步的功能)</li> <li>浏览器行为跟踪(追踪用户行为、统计等)</li></ul> <p>创建一个新的<code>Cookie</code>的语法格式是:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> newCookie<span class="token punctuation">;</span>
</code></pre></div><p>当对<code>document.cookie</code>进行赋值操作时，该属性会调用它底层所绑定的函数来设置<code>cookie</code>。其中<code>newCookie</code>是一个键值对的字符串，其格式如下:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 语法格式</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> key<span class="token operator">=</span>value<span class="token punctuation">[</span>
    <span class="token punctuation">;</span>path<span class="token operator">=</span>path <span class="token operator">|</span>
    <span class="token punctuation">;</span>domain<span class="token operator">=</span>domain <span class="token operator">|</span>
    <span class="token punctuation">;</span>max<span class="token operator">-</span>age<span class="token operator">=</span>max<span class="token operator">-</span>age<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>second <span class="token operator">|</span>
    <span class="token punctuation">;</span>expires<span class="token operator">=</span>date<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>GMTString<span class="token operator">-</span>format <span class="token operator">|</span>
    <span class="token punctuation">;</span>secure <span class="token operator">|</span>
    <span class="token punctuation">;</span>samesite
<span class="token punctuation">]</span>

<span class="token comment">// 示例</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">'nickname=anran758;path=/;max-age=31536000'</span>
</code></pre></div><p><code>key/value</code>表示<code>cookie</code>的键与值，其后为<code>cookie</code>的属性，简要概括一下：</p> <table><thead><tr><th style="text-align:left;">cookie 属性</th> <th style="text-align:left;">作用</th> <th style="text-align:left;">兼容性</th></tr></thead> <tbody><tr><td style="text-align:left;">path</td> <td style="text-align:left;">指定哪些路径可以接受<code>cookie</code>, 不指定则为默认为当前文档的主机</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">domain</td> <td style="text-align:left;">指定哪些主机可以接受<code>Cookie</code>, 不指定则为当前页面的根目录<code>/</code></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">max-age</td> <td style="text-align:left;">指定从现在开始<code>Cookie</code>可以存在的<strong>秒数</strong>, 超时该<code>cookie</code>就会过期</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">expires</td> <td style="text-align:left;">显式指定<code>cookie</code>具体的到期时间</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">secure</td> <td style="text-align:left;"><code>Cookie</code>只能通过安全协议传输为<code>https</code></td> <td style="text-align:left;">Chrome52+</td></tr> <tr><td style="text-align:left;">samesite</td> <td style="text-align:left;">阻止浏览器发送此<code>cookie</code>以及跨站点请求</td> <td style="text-align:left;">Chrome52+</td></tr></tbody></table> <p>服务端可以通过<code>HTTP</code>头部<code>set-cookie</code>来给浏览器设置<code>cookie</code>, 格式如上所示。</p> <p>如果同时指定了<code>Expires</code>和<code>Max-Age</code>，那么<code>Max-Age</code>的值将优先生效。</p> <p><code>Set-Cookie</code>没有指定<code>Expires</code>或<code>Max-Age</code>属性，则为会话信息(<code>Session Cookie</code>), 关闭浏览器后该<code>cookie</code>就会失效。</p> <hr> <p><code>Cookie</code>信息可以通过读取<code>document.cookie</code>来获取，但是读取出来的是由一个或多个<code>cookie</code>以<code>;</code>分隔的键值对字符串，如<code>key=value;key1=value1</code>。</p> <p>了解了<code>cookies</code>的规则之后，我们需要对它进一步的封装以便在实际应用中使用：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> tools <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 读取 cookies
   * @param name - cookie 名，不传拿全部
   */</span>
  <span class="token function">cookieGet</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cookies <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> key<span class="token punctuation">,</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> cookies<span class="token punctuation">;</span>

    <span class="token keyword">const</span> cookie <span class="token operator">=</span> cookies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>key <span class="token operator">===</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> cookie <span class="token operator">?</span> cookie<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 设置cookie
   * @param name - cookie 名
   * @param value - cookie 值
   * @param days - 几天后过期
   * @param domain - 该 cookie 在哪些域名下可用
   * @param path - 指定 cookie 路径
   */</span>
  <span class="token function">cookieSet</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> days<span class="token punctuation">,</span> domain<span class="token punctuation">,</span> path <span class="token operator">=</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name <span class="token operator">||</span> <span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> cookie <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>days <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> days<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      date<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> days <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cookie <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">; expires=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>domain<span class="token punctuation">)</span> cookie <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">; domain=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> cookie <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">; path=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> cookie<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 查询 cookie</span>
tools<span class="token punctuation">.</span><span class="token function">cookieGet</span><span class="token punctuation">(</span><span class="token string">'nickName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

<span class="token comment">// 设置 cookie</span>
tools<span class="token punctuation">.</span><span class="token function">cookieSet</span><span class="token punctuation">(</span><span class="token string">'nickName'</span><span class="token punctuation">,</span> <span class="token string">'anran758'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
tools<span class="token punctuation">.</span><span class="token function">cookieGet</span><span class="token punctuation">(</span><span class="token string">'nickName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;anran758&quot;</span>

<span class="token comment">// 清除 cookie</span>
tools<span class="token punctuation">.</span><span class="token function">cookieSet</span><span class="token punctuation">(</span><span class="token string">'nickName'</span><span class="token punctuation">,</span> <span class="token string">'anran758'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
tools<span class="token punctuation">.</span><span class="token function">cookieGet</span><span class="token punctuation">(</span><span class="token string">'nickName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
</code></pre></div><p>具体更多有关<code>cookies</code>信息可以戳<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies" target="_blank" rel="noopener noreferrer">MDN - Cookies<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="date"><a href="#date" class="header-anchor">#</a> Date</h2> <ul><li>设置某天的时间区间，区间在<code>00:00:00 - 23:59:59</code>。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">setFullDate</span><span class="token punctuation">(</span><span class="token parameter">day</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setHours</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setHours</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> base <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>start <span class="token operator">-</span> day <span class="token operator">*</span> base<span class="token punctuation">,</span> end<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h2> <h3 id="批量插入节点"><a href="#批量插入节点" class="header-anchor">#</a> 批量插入节点</h3> <p>DOM 操作实际上是一个挺耗费渲染性能的操作，我们应该尽可能的减少对 DOM 的操作。</p> <p>比如批量插入节点时可以先在 js 中将新创建的节点插入到 <code>Fragment</code> 节点中，再将该节点插入到页面中，这样就仅触发一次渲染。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> $fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> $list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> $ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  $ele<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">item - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  $ele<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'item'</span><span class="token punctuation">)</span>

  $fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

$list<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h2 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h2> <p>开发常见问题</p> <ol><li><p>如果给子组件设置<code>v-if</code>的话，那么 vue 会在切换过程中将条件块内的事件监听器和子组件适当地被销毁和重建。也就是说就算里面用了<code>watch</code>也会失效。</p></li> <li><p>如果组件不是通过<code>new Vue</code>这种形式生成出来的话，那么<code>data</code>就必须要使用<code>function</code>的形式返回一个对象，而不是直接使用对象。不然的话<code>vue</code>会提示报错的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 这种会报错</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;{{text}}&lt;/div&gt;'</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    text<span class="token operator">:</span> <span class="token string">'hello'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 下面两者都不会</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">'#root'</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;{{text}}&lt;/div&gt;'</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    text<span class="token operator">:</span> <span class="token string">'123'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;{{text}}&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">'hello'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在父组件的<code>created</code>钩子上进行赋值操作的话，数值的变化是传不到子组件的<code>watch</code>里的。</p></li> <li><p>实际上，<code>props</code>的值是可以直接修改的。但是一般情况下我们并不推荐去修改<code>prop</code>里的内容，因为这会直接修改到父级的<code>data</code>。会引起组件之间的逻辑的混乱，未来 debug 也变得麻烦了起来。<br>通常我们会通过<code>this.$emit('postHandle', data)</code>这种形式去激活，通知父级更改。</p></li> <li><p>组件的通信上，<code>props</code>里可以使用驼峰性命名参数，但传入的时候需要转变为<strong>连字号(-)</strong>。</p></li> <li><p>在使用<code>vue-router</code>时，将<code>mode</code>设置为<code>history</code>模式的话，没有后端进行做相应的匹配会报 404。<br>但如果在开发模式下，使用<code>webpack-dev-server</code>作为本地服务器的话，可以让<code>webpack</code>设置<code>devServer</code>下的<code>historyApiFallback</code>做路径的映射，这样就可以用干净简洁的<code>history</code>模式啦~</p></li></ol> <h3 id="vuex"><a href="#vuex" class="header-anchor">#</a> vuex</h3> <p>vuex 的 commit mutation 是一个同步的方法，而 Action 通过<code>store.dispatch</code>方法触发的是一个异步的方法。</p> <hr> <h2 id="react"><a href="#react" class="header-anchor">#</a> React</h2> <ul><li>[ ] React / React Hooks 生命周期各钩子使用场景总结</li> <li>[ ] redux、redux-sage 总结</li> <li>[ ] router 相关总结</li></ul> <h3 id="注意事项与技巧"><a href="#注意事项与技巧" class="header-anchor">#</a> 注意事项与技巧</h3> <ol><li>react 组件需要以大写字母开头的标签才能正常解析</li> <li>react 是响应式框架，只需要关心数据</li> <li>react 绑定事件名是驼峰式</li> <li>react 不允许直接修改 state 的数据，因为会对性能有影响</li> <li>react 是单向数据流，是视图层框架，只解决视图和数据渲染方面</li> <li>jsx/tsx 一个组件内需要包裹一个元素，但如果这个组件内你不想再最外层额外包一个 <code>&lt;div&gt;</code> 的话，可以使用 <code>&lt;Fragment&gt;&lt;/Fragment&gt;</code> 占位符，或者它的简写形式 <code>&lt;&gt;&lt;/&gt;</code>。</li> <li>当组件的 state 或者 props 发生改变时，render 函数就会重新执行。</li></ol> <h3 id="展示型组件特点"><a href="#展示型组件特点" class="header-anchor">#</a> 展示型组件特点</h3> <ol><li>关心数据的展示方式</li> <li>不依赖 APP 的其他文件</li> <li>不关心数据是如何加装和变化</li> <li>仅通过 props 接受数据和回调</li> <li>通常为函数式组件</li></ol> <h3 id="hook"><a href="#hook" class="header-anchor">#</a> Hook</h3> <p><code>Hook</code> 的引入是为了解决以前 <code>React</code> 的一些痛点:</p> <ul><li><p>类组件状态逻辑难以复用</p> <ul><li>缺少复用逻辑</li> <li>渲染属性和高阶组件导致层级冗余</li></ul></li> <li><p>趋向复杂难以维护</p> <ul><li>生命周期函数混杂不相干逻辑</li> <li>相干逻辑分散在不同生命周期</li></ul></li> <li><p>this 指向困扰</p> <ul><li>内联函数过度创建新句柄</li> <li>类成员函数不能保证 this</li></ul></li></ul> <p><strong>Hook 的优势:</strong></p> <ol><li>函数组件无 this 问题</li> <li>自定义 hook 方便复用状态逻辑</li> <li>副作用的关注点分离</li></ol> <p><strong>Hook 需要准守的规则:</strong></p> <ol><li>只在最顶层使用 Hook</li> <li>只在 React 函数中调用 Hook</li></ol> <p><strong>React.memo 与 React.useMemo:</strong></p> <p><code>memo</code> 针对一个组件的渲染是否重复执行，<code>useMemo</code> 定义一段函数逻辑是否重复执行。</p> <p><strong>React.useMemo 与 React.useCallback:</strong></p> <p><code>useMemo(() =&gt; fn)</code> 返回的是一个函数，将等同于 <code>useCallback(fn)</code></p> <p><strong>React.useStatus 与 React.useRef:</strong></p> <p><code>React.useStatus</code> 的使用相当于类的 <code>state</code> 的某项，<code>React.useRef</code> 是相当于类的内部属性。前者用于渲染，后者类似于普通的变量。</p> <h3 id="redux"><a href="#redux" class="header-anchor">#</a> redux</h3> <p><code>redux</code> 三大原则：单一数据源、状态不可变、纯函数修改状态</p> <h3 id="react-与-vue-的选择"><a href="#react-与-vue-的选择" class="header-anchor">#</a> React 与 Vue 的选择</h3> <p>在项目架构时, React 相比 Vue 会更灵活一些，在遇到非常复杂的业务时倾向于使用 React, 它的技术方案会更多一点选择；vue 则提供了更丰富的 API 实现功能会更简单，但相对来说缺少一定的灵活性，存在一定的限制。</p> <hr> <h2 id="小程序"><a href="#小程序" class="header-anchor">#</a> 小程序</h2> <p>小程序与<code>React</code>、<code>Vue</code> 之间有很多共通之处，将一些概念转换过来可以快速融入微信小程序思路：</p> <ol><li><p>小程序也有生命周期，一般会在<code>onLoad</code>处理请求接口，因为它是最触发的生命周期钩子。</p></li> <li><p>在小程序中使用 <code>import</code> 语法时，要使用相对路径，不能使用绝对路径(如访问根目录 <code>/</code> ), 否则会抛错。</p></li> <li><p>在组件上，小程序的 <code>this.triggerEvent</code> 相当于 <code>vue</code> 的 <code>this.$emit</code>, 通过调用 API 来通知父组件有事件触发。</p></li> <li><p>只有跟 <code>wxml</code> 内有绑定的变量才需要放在 <code>this.data</code> 中，其余的放在 <code>this</code> 里。这样能减轻渲染的压力。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 需要跟 wxml 模板绑定的数据</span>
    gifts<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// timer 只是用于储存定时器，不需要在页面中渲染</span>
  _timer<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 页面的方法列表
   */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="第三方库"><a href="#第三方库" class="header-anchor">#</a> 第三方库</h2> <p>实际工作中总会遇到很多形形色色的业务需求，这篇针对特定业务需求所需推荐的库。</p> <table><thead><tr><th>name</th> <th>用途</th></tr></thead> <tbody><tr><td>moment</td> <td>专门处理 date 的操作</td></tr> <tr><td>lodash</td> <td>主要用于数据处理相关的 js 工具库</td></tr> <tr><td>node-qrcode</td> <td>用以生成二维码</td></tr> <tr><td>xlsx</td> <td>excel 之类的表格处理，如导入导出</td></tr> <tr><td>classnames</td> <td>类名管理工具</td></tr> <tr><td><a href="https://www.npmjs.com/package/decimal.js" target="_blank" rel="noopener noreferrer">decimal.js<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>JavaScript的任意精度的十进制类型。</td></tr> <tr><td><a href="https://www.npmjs.com/package/numeral" target="_blank" rel="noopener noreferrer">numeral<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>一个用于格式化和处理数字的javascript库。</td></tr></tbody></table> <hr> <h2 id="数据可视化"><a href="#数据可视化" class="header-anchor">#</a> 数据可视化</h2> <h3 id="bizcharts"><a href="#bizcharts" class="header-anchor">#</a> bizcharts</h3> <p><code>Chart</code> 图表使用<code>type: time</code>，数据量大了后刻度会不准，解决方法是将<code>type</code>替换为<code>timecat</code>，将日期转换为有序的分类数据。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/anran758/front-end-lab/edit/master/docs/javascript/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/3/2020, 3:57:25 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/front-end-lab/assets/js/app.0dc81959.js" defer></script><script src="/front-end-lab/assets/js/2.902ef262.js" defer></script><script src="/front-end-lab/assets/js/16.fbfe6aca.js" defer></script><script src="/front-end-lab/assets/js/4.344f8158.js" defer></script>
  </body>
</html>
